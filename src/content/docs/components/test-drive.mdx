---
title: Test Drive Form Component
description: Comprehensive guide for the Test Drive Form component in Voltrux Motors
---

import TestDriveFormPreview from '../../../components/TestDriveFormPreview.astro';
import TestDriveFormDialog from '../../../components/TestDriveFormDialog.astro';

This document provides a detailed overview of the `testdriveform` component, which allows users to schedule test drives for Voltrux vehicles with an elegant and user-friendly interface.

## Component Preview

### Live Preview

Here's a live preview of the Test Drive Form component (interactive version):

<TestDriveFormPreview />

## Dialog Configuration

The component includes a comprehensive dialog for content authors, allowing them to customize the form fields and options. Here's an interactive preview of the Touch UI dialog:

<TestDriveFormDialog />

The Touch UI dialog provides an intuitive interface for content authors to:

- Set the form title and subtitle
- Configure location, model, and time slot options
- Customize the success message
- Add or remove form options as needed

The Test Drive Form component provides an intuitive interface for users to book test drives with the following features:
- Comprehensive form with personal information fields
- Dropdown selections for location, model, and time preferences
- Informative section highlighting reasons to test drive
- Responsive design that works well on all device sizes
- Form validation and submission feedback

### Visual Mockup

Here's a detailed representation of the component when rendered in a browser:

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           TEST DRIVE FORM PREVIEW                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│  BOOK YOUR TEST DRIVE                                │  WHY TEST DRIVE A       │
│                                                       │  VOLTRUX?              │
│  First Name*                                         │                         │
│  [________________________________________________]  │  ✓ Experience cutting-  │
│                                                      │    edge technology     │
│  Last Name*                                          │                         │
│  [________________________________________________]  │  ✓ Feel the power of    │
│                                                      │    premium electric    │
│  Email*                                              │    engines             │
│  [________________________________________________]  │                         │
│                                                      │  ✓ Explore luxury       │
│  Phone                                               │    features designed   │
│  [________________________________________________]  │    for comfort         │
│                                                      │                         │
│  Preferred Location*                                 │  ✓ Discover revolutionary│
│  ▼ [______________Select a location_______________]  │    safety systems      │
│                                                      │                         │
│  Preferred Model*                                    │  ✓ Test autonomous      │
│  ▼ [_______________Select a model________________]  │    driving capabilities│
│                                                      │                         │
│  Preferred Time*                                     │  CONTACT & LOCATION    │
│  ▼ [________________Select a time________________]  │  INFO                  │
│                                                      │  For questions contact │
│                                                      │  (555) 123-4567 or   │
│  [_________________BOOK NOW_________________]        │  visit our locations   │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Dependencies

*   **Sling Model:** `com.voltrux.aem.core.models.TestDriveFormModel`
*   **Super Type:** None

## Files

### .content.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0"
          xmlns:cq="http://www.day.com/jcr/cq/1.0"
          xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
          jcr:primaryType="cq:Component"
          jcr:title="Test Drive Form Component"
          componentGroup="Voltrux Motors - Forms"/>
```

### _cq_dialog/.content.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0"
          xmlns:granite="http://www.adobe.com/jcr/granite/1.0"
          xmlns:cq="http://www.day.com/jcr/cq/1.0"
          xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
          jcr:primaryType="nt:unstructured" jcr:title="Test Drive Form Configuration"
          sling:resourceType="cq/gui/components/authoring/dialog">
    <content jcr:primaryType="nt:unstructured"
             sling:resourceType="granite/ui/components/coral/foundation/container">
        <items jcr:primaryType="nt:unstructured">
            <tabs jcr:primaryType="nt:unstructured"
                  sling:resourceType="granite/ui/components/coral/foundation/tabs">
                <items jcr:primaryType="nt:unstructured">
                    <main jcr:primaryType="nt:unstructured"
                          jcr:title="Form Settings"
                          sling:resourceType="granite/ui/components/coral/foundation/container">
                        <items jcr:primaryType="nt:unstructured">
                            <formTitle jcr:primaryType="nt:unstructured"
                                       sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                       fieldLabel="Form Title"
                                       name="./formTitle"
                                       value="Book Your Test Drive"
                                       fieldDescription="Title displayed above the form"/>
                            <formSubtitle jcr:primaryType="nt:unstructured"
                                          sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                          fieldLabel="Form Subtitle"
                                          name="./formSubtitle"
                                          value="Select your preferred model and time slot"
                                          fieldDescription="Subtitle displayed below the title"/>
                            <successMessage jcr:primaryType="nt:unstructured"
                                            sling:resourceType="granite/ui/components/coral/foundation/form/textarea"
                                            fieldLabel="Success Message"
                                            name="./successMessage"
                                            fieldDescription="Message shown after successful form submission"/>
                        </items>
                    </main>
                    <dropdownOptions jcr:primaryType="nt:unstructured"
                                    jcr:title="Dropdown Options"
                                    sling:resourceType="granite/ui/components/coral/foundation/container">
                        <items jcr:primaryType="nt:unstructured">
                            <locations jcr:primaryType="nt:unstructured"
                                       sling:resourceType="granite/ui/components/coral/foundation/form/multifield"
                                       fieldLabel="Available Locations"
                                       fieldDescription="Add available dealership locations"
                                       composite="{Boolean}true">
                                <field jcr:primaryType="nt:unstructured"
                                       sling:resourceType="granite/ui/components/coral/foundation/form/fieldset"
                                       name="./locations">
                                    <items jcr:primaryType="nt:unstructured">
                                        <text jcr:primaryType="nt:unstructured"
                                              sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                              fieldLabel="Display Text"
                                              name="./text"/>
                                        <value jcr:primaryType="nt:unstructured"
                                               sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                               fieldLabel="Submission Value"
                                               name="./value"/>
                                    </items>
                                </field>
                            </locations>
                            <models jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/coral/foundation/form/multifield"
                                    fieldLabel="Available Models"
                                    fieldDescription="Add available vehicle models"
                                    composite="{Boolean}true">
                                <field jcr:primaryType="nt:unstructured"
                                       sling:resourceType="granite/ui/components/coral/foundation/form/fieldset"
                                       name="./models">
                                    <items jcr:primaryType="nt:unstructured">
                                        <text jcr:primaryType="nt:unstructured"
                                              sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                              fieldLabel="Display Text"
                                              name="./text"/>
                                        <value jcr:primaryType="nt:unstructured"
                                               sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                               fieldLabel="Submission Value"
                                               name="./value"/>
                                    </items>
                                </field>
                            </models>
                        </items>
                    </dropdownOptions>
                </items>
            </tabs>
        </items>
    </content>
</jcr:root>
```

### testdriveform.html

```html
<sly data-sly-use.model="com.voltrux.aem.core.models.TestDriveFormModel"/>

<div class="test-drive-form">
    <div class="form-container">
        <div class="form-header">
            <h2>${model.formTitle}</h2>
            <p>${model.formSubtitle}</p>
        </div>
        
        <div class="form-wrapper">
            <div id="success-message" class="message success" style="display: none;">
                ${model.successMessage @ context='html'}
            </div>
            
            <div id="error-message" class="message error" style="display: none;">
                <p>Error submitting the form. Please try again.</p>
            </div>
            
            <form id="test-drive-form" action="${model.servletPath}" method="POST">
                <div class="form-group">
                    <label for="firstName">First Name*</label>
                    <input type="text" id="firstName" name="firstName" required>
                </div>
                
                <div class="form-group">
                    <label for="lastName">Last Name*</label>
                    <input type="text" id="lastName" name="lastName" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email*</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone">
                </div>
                
                <div class="form-group">
                    <label for="location">Preferred Location*</label>
                    <select id="location" name="location" required>
                        <option value="">Select a location</option>
                        <sly data-sly-list.location="${model.locationOptions}">
                            <option value="${location.value}">${location.text}</option>
                        </sly>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="model">Preferred Model*</label>
                    <select id="model" name="model" required>
                        <option value="">Select a model</option>
                        <sly data-sly-list.model="${model.modelOptions}">
                            <option value="${model.value}">${model.text}</option>
                        </sly>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="time">Preferred Time*</label>
                    <select id="time" name="time" required>
                        <option value="">Select a time</option>
                        <option value="morning">Morning (9AM - 12PM)</option>
                        <option value="afternoon">Afternoon (12PM - 5PM)</option>
                        <option value="evening">Evening (5PM - 8PM)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <button type="submit" class="submit-button">Book Test Drive</button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="info-section">
        <div class="why-test-drive">
            <h3>Why Test Drive a Voltrux?</h3>
            <ul>
                <sly data-sly-list.item="${model.reasonsToTestDrive}">
                    <li>${item.text}</li>
                </sly>
            </ul>
        </div>
        
        <div class="contact-info">
            <h3>Contact Information</h3>
            <p>For any questions about scheduling your test drive, contact us at:</p>
            <p>Phone: (555) 123-4567</p>
            <p>Email: testdrives@voltruxmotors.com</p>
        </div>
    </div>
</div>
```

### testdriveform.css

```css
.test-drive-form {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    padding: 2rem;
    background-color: #f9f9f9;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    max-width: 1200px;
    margin: 0 auto;
}

.form-container {
    flex: 2;
    min-width: 300px;
}

.info-section {
    flex: 1;
    min-width: 250px;
    background-color: #f5f5f5;
    padding: 1.5rem;
    border-radius: 6px;
}

.form-header h2 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    color: #333;
}

.form-header p {
    color: #666;
    margin: 0;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
    color: #333;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1rem;
}

.submit-button {
    background-color: #e4002b;
    color: white;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 50px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.submit-button:hover {
    background-color: #b60022;
}

.message {
    padding: 1rem;
    border-radius: 4px;
    margin-bottom: 1rem;
}

.message.success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.message.error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.why-test-drive h3 {
    color: #e4002b;
    margin-top: 0;
}

.why-test-drive ul {
    padding-left: 1.5rem;
}

.why-test-drive li {
    margin-bottom: 0.5rem;
}

.contact-info h3 {
    color: #333;
}

/* Responsive design */
@media (max-width: 768px) {
    .test-drive-form {
        flex-direction: column;
    }
    
    .info-section {
        order: -1; /* Move info section to top on mobile */
    }
}
```

## Component Properties

### Form Configuration
- `formTitle` (String): Title to display above the form (default: "Book Your Test Drive")
- `formSubtitle` (String): Subtitle to display below the title (default: "Select your preferred model and time slot")
- `successMessage` (String): Message to show after successful submission
- `servletPath` (String): Path to the servlet that handles form submissions

### Dynamic Dropdowns
- `locationOptions` (List of Objects): Available dealership locations with text and value properties
- `modelOptions` (List of Objects): Available vehicle models with text and value properties
- `timeSlots` (List of Objects): Available time slots with text and value properties

## Functionality

### Form Validation
- Required field validation for name, email, location, model, and time
- Email format validation
- Client-side validation before submission
- Server-side validation in the processing servlet

### Submission Handling
- Asynchronous form submission with loading feedback
- Success/error message display
- Form reset after successful submission
- Error handling for network/server issues

### Responsive Behavior
- On mobile: Information section moves above the form
- On desktop: Form and information section appear side-by-side
- Adapts to different screen sizes with appropriate spacing

## JavaScript Interaction

The component includes JavaScript functionality for:

```javascript
// Example form submission handler
document.getElementById('test-drive-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    
    // Show loading state
    const submitBtn = this.querySelector('.submit-button');
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Submitting...';
    submitBtn.disabled = true;
    
    fetch(this.action, {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Show success message
            document.getElementById('success-message').style.display = 'block';
            this.reset();
        } else {
            // Show error message
            document.getElementById('error-message').style.display = 'block';
        }
    })
    .catch(error => {
        // Show error message
        document.getElementById('error-message').style.display = 'block';
    })
    .finally(() => {
        // Restore button state
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    });
});
```

## Backend Processing

The form submission is handled by a Sling Servlet that:

- Validates the input data
- Stores the test drive request in the database
- Sends a confirmation email to the user
- May trigger a notification to the selected dealership

## Integration Points

### AEM Integration
- Configurable via AEM's component dialog
- Integrates with AEM Forms for advanced functionality
- Uses AEM's CSRF protection mechanism
- Leverages AEM's user management for authentication if needed

### External Systems
- CRM system integration for lead management
- Email service for notifications
- Calendar system for scheduling
- Inventory system to verify model availability

## Styling

The component uses the following CSS classes for styling:

### Main Component Container
- `.test-drive-form` - Main wrapper with flex layout
- `.form-container` - Left column for the form
- `.info-section` - Right column for information

### Form Elements
- `.form-header` - Container for title and subtitle
- `.form-group` - Individual form field container
- `.form-group label` - Form field label styling
- `.form-group input` - Text input styling
- `.form-group select` - Dropdown select styling

### Messages
- `.message` - Base message styling
- `.message.success` - Success message styling
- `.message.error` - Error message styling

### Information Section
- `.why-test-drive` - Section for benefits
- `.contact-info` - Contact information section

### Responsive Effects
- Flex wrap behavior on smaller screens
- Mobile-first approach with appropriate stacking
- Touch-friendly elements and spacing

## Testing Considerations

### Unit Tests
```java
@Test
void shouldValidateRequiredFields() {
    // Verify required field validation
    TestDriveFormModel model = createModel();
    // Test validation logic
}
```

### Integration Tests
```java
@Test
void shouldSubmitFormSuccessfully() {
    // Test form submission workflow
    // Verify data persistence
    // Verify email notification
}
```

## Security Considerations

- Input sanitization to prevent XSS attacks
- CSRF token validation
- Rate limiting to prevent spam
- Personal data handling per privacy regulations

## Performance Optimization

- Lazy loading of component resources
- Efficient form validation
- Optimized database queries for location/model options
- Caching of static content

This component provides a seamless experience for users to schedule test drives while maintaining integration with backend systems and following AEM best practices.