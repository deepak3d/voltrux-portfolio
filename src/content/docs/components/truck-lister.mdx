---
title: Truck Lister Component
description: Comprehensive guide for the Truck Lister component in Voltrux Motors
---

This document provides a detailed overview of the `trucklister` component, which is used to display and filter a collection of trucks with configurable options.

## Overview

The Truck Lister component provides a dynamic listing of trucks with filtering and sorting capabilities. It allows users to browse through available truck models, view detailed specifications, and filter based on various criteria such as price, model year, engine type, and more.

## Component Structure

The Truck Lister component consists of several key files that define its functionality and appearance:

### .content.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
          jcr:description="Voltrux Motors Truck Lister Component"
          jcr:primaryType="cq:Component"
          jcr:title="Truck Lister"
          componentGroup="Voltrux Motors - Content"/>
```

### _cq_dialog/.content.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0"
          xmlns:granite="http://www.adobe.com/jcr/granite/1.0"
          xmlns:cq="http://www.day.com/jcr/cq/1.0"
          xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
          jcr:primaryType="nt:unstructured" jcr:title="Truck Lister Configuration"
          sling:resourceType="cq/gui/components/authoring/dialog">
    <content jcr:primaryType="nt:unstructured"
             sling:resourceType="granite/ui/components/coral/foundation/container">
        <items jcr:primaryType="nt:unstructured">
            <tabs jcr:primaryType="nt:unstructured"
                  sling:resourceType="granite/ui/components/coral/foundation/tabs">
                <items jcr:primaryType="nt:unstructured">
                    <settings jcr:primaryType="nt:unstructured"
                              jcr:title="Content Source"
                              sling:resourceType="granite/ui/components/coral/foundation/container">
                        <items jcr:primaryType="nt:unstructured">
                            <!-- Field to set the root path for content query -->
                            <rootPath jcr:primaryType="nt:unstructured"
                                      sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                                      fieldLabel="Root Path for Trucks"
                                      name="./rootPath"
                                      rootPath="/content"
                                      placeholder="/content/voltrux/en/trucks"/>

                            <!-- Field to set the maximum number of trucks to display -->
                            <maxResults jcr:primaryType="nt:unstructured"
                                        sling:resourceType="granite/ui/components/coral/foundation/form/numberfield"
                                        fieldLabel="Max Results to Display"
                                        name="./maxResults"
                                        value="12"/>
                        </items>
                    </settings>
                    <filtering jcr:primaryType="nt:unstructured"
                              jcr:title="Filter Options"
                              sling:resourceType="granite/ui/components/coral/foundation/container">
                        <items jcr:primaryType="nt:unstructured">
                            <!-- Multifield for Filter Categories -->
                            <filterCategories jcr:primaryType="nt:unstructured"
                                        sling:resourceType="granite/ui/components/coral/foundation/form/multifield"
                                        fieldLabel="Filter Categories">
                                <field jcr:primaryType="nt:unstructured"
                                       sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                       name="./filterCategories"
                                       value="Model"/>
                            </filterCategories>
                        </items>
                    </filtering>
                </items>
            </tabs>
        </items>
    </content>
</jcr:root>
```

### trucklister.html

```html
<sly data-sly-use.model="com.voltrux.aem.core.models.TruckListModel"/>

<!-- New: Added data-component hook for JS -->
<section class="truck-lister" data-component="truck-lister">
    <div class="container">

        <sly data-sly-test="${model.trucks && model.trucks.size > 0}">

            <!-- Category Filter (Configured via model) -->
            <div class="filter-container">
                <sly data-sly-list.filter="${model.filterCategories}">
                    <div class="filter-group">
                        <label for="filter-${filter.slug}">${filter.name}</label>
                        <select id="filter-${filter.slug}" data-filter="${filter.slug}">
                            <option value="all">All ${filter.name}s</option>
                            <sly data-sly-list.option="${filter.options}">
                                <option value="${option.slug}">${option.name}</option>
                            </sly>
                        </select>
                    </div>
                </sly>
                <button class="filter-reset-btn">Reset Filters</button>
            </div>

            <!-- Results Count -->
            <div class="results-count">
                Showing <span class="count">${model.totalTrucks}</span> trucks
            </div>

            <!-- Trucks Grid -->
            <div class="trucks-grid">
                <sly data-sly-list.truck="${model.trucks}">
                    <div class="truck-card" 
                         data-price="${truck.price}" 
                         data-model="${truck.modelSlug}"
                         data-year="${truck.year}"
                         data-engine="${truck.engineSlug}">
                        <div class="truck-image">
                            <img
                                src="${truck.imageSrc @ context='uri'}"
                                alt="${truck.modelName}"
                                onerror="this.onerror=null; this.src='https://placehold.co/400x300/F2F2F2/666?text=Truck+Image';"
                            />
                        </div>
                        
                        <div class="truck-content">
                            <div class="truck-meta">
                                <span class="truck-year">${truck.year}</span>
                                <span class="truck-badge">${truck.badge}</span>
                            </div>
                            
                            <h3 class="truck-model">${truck.modelName}</h3>
                            
                            <p class="truck-description">${truck.description @ context='html'}</p>
                            
                            <div class="truck-specs">
                                <div class="spec">
                                    <span class="spec-label">Engine</span>
                                    <span class="spec-value">${truck.engine}</span>
                                </div>
                                <div class="spec">
                                    <span class="spec-label">Transmission</span>
                                    <span class="spec-value">${truck.transmission}</span>
                                </div>
                                <div class="spec">
                                    <span class="spec-label">Mileage</span>
                                    <span class="spec-value">${truck.mileage} miles</span>
                                </div>
                            </div>
                            
                            <div class="truck-price">
                                <span class="price-label">Starting at</span>
                                <span class="price-amount">${truck.formattedPrice}</span>
                            </div>
                            
                            <div class="truck-actions">
                                <a href="${truck.inquireLink @ context='uri'}" class="inquire-btn">Inquire</a>
                                <a href="${truck.viewDetailsLink @ context='uri'}" class="details-btn">View Details</a>
                            </div>
                        </div>
                    </div>
                </sly>
            </div>

            <!-- Load More Button -->
            <div class="load-more-container" data-sly-test="${model.hasMoreTrucks}">
                <button class="load-more-btn" data-offset="${model.nextOffset}">
                    Load More Trucks
                </button>
            </div>

        </sly>

        <!-- Empty State -->
        <sly data-sly-test="${!model.trucks || model.trucks.size == 0}">
            <div class="empty-state">
                <h3>No trucks found</h3>
                <p>Try adjusting your filters or check back later for new inventory.</p>
            </div>
        </sly>

    </div>
</section>
```

### _cq_editConfig.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0"
          xmlns:jcr="http://www.jcp.org/jcr/1.0"
          xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
          jcr:primaryType="cq:EditConfig">

    <!-- This node defines the text that appears when the component is empty -->
    <cq:emptytext
            jcr:primaryType="nt:unstructured"
            text="Please configure the Truck Lister component or add truck inventory."/>
</jcr:root>
```

## CSS Styles

The component uses the following CSS classes:

### Main Container
- `.truck-lister` - Main container with consistent padding
- `.container` - Centered container with max-width and responsive padding

### Filter Section
- `.filter-container` - Container for all filter controls
- `.filter-group` - Individual group containing a filter label and select
- `.filter-reset-btn` - Button to reset all active filters

### Results Display
- `.results-count` - Displays the number of trucks found
- `.trucks-grid` - Grid layout for displaying truck cards

### Truck Cards
- `.truck-card` - Individual card container for each truck
- `.truck-image` - Container for the truck image
- `.truck-content` - Container for all truck information
- `.truck-meta` - Container for year and badge indicators
- `.truck-model` - Truck model name heading
- `.truck-description` - Truck description text
- `.truck-specs` - Container for technical specifications
- `.spec` - Individual specification item
- `.truck-price` - Container for pricing information
- `.truck-actions` - Container for action buttons

### Action Buttons
- `.inquire-btn` - Primary inquire button
- `.details-btn` - Secondary details button
- `.load-more-btn` - Button to load more trucks

### Empty State
- `.empty-state` - Displayed when no trucks match the current filters

### Responsive Effects
- Uses responsive grid layout that adapts to screen size
- Filter controls stack on smaller screens
- Truck cards adjust to 1 column on mobile, 2-3 on tablet, 3-4 on desktop

## JavaScript Interaction

The component includes JavaScript functionality for filtering and pagination:

```javascript
// Example JavaScript for filtering and loading
document.addEventListener('DOMContentLoaded', function() {
  const component = document.querySelector('[data-component="truck-lister"]');
  const filterSelects = component.querySelectorAll('select[data-filter]');
  const truckCards = component.querySelectorAll('.truck-card');
  const resetBtn = component.querySelector('.filter-reset-btn');
  const loadMoreBtn = component.querySelector('.load-more-btn');
  
  // Filter trucks based on selections
  filterSelects.forEach(select => {
    select.addEventListener('change', function() {
      const filterType = this.getAttribute('data-filter');
      const filterValue = this.value;
      
      truckCards.forEach(card => {
        const cardValue = card.getAttribute(`data-${filterType}`);
        if (filterValue === 'all' || cardValue === filterValue) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });
  });
  
  // Reset filters
  if (resetBtn) {
    resetBtn.addEventListener('click', function() {
      filterSelects.forEach(select => {
        select.value = 'all';
      });
      truckCards.forEach(card => {
        card.style.display = 'block';
      });
    });
  }
  
  // Load more trucks
  if (loadMoreBtn) {
    loadMoreBtn.addEventListener('click', function() {
      // Implementation for loading more trucks via AJAX
      const offset = this.getAttribute('data-offset');
      // Load more logic here
    });
  }
});
```

## Dependencies

*   **Sling Model:** `com.voltrux.aem.core.models.TruckListModel`
*   **Super Type:** None

## Previewing in AEM

To properly preview the Truck Lister component:

### Prerequisites
- AEM instance running (6.5 or later)
- Voltrux site structure deployed
- Sample truck inventory created

### Steps to Preview

1. **Deploy the Component**
   ```bash
   # Use your build tool to deploy to AEM
   mvn clean install -PautoInstallPackage
   ```

2. **Create or Navigate to a Page**
   - Go to your site in AEM (e.g., `http://localhost:4502/sites`)
   - Create a new page or edit an existing one

3. **Add the Component**
   - Enter edit mode by clicking the "Edit" button
   - Drag the "Truck Lister" component from the component panel to your page
   - Configure using the dialog:
     - Set the "Root Path for Trucks"
     - Define "Max Results to Display"
     - Add desired filter categories

4. **Preview the Component**
   - Click "Page Information" → "View as Published" or use Preview mode
   - Test filtering by selecting different options
   - Verify responsive behavior by resizing the browser window

### Troubleshooting Preview Issues
- If no trucks appear: Verify that your "Root Path" contains truck content
- If filtering doesn't work: Check that JavaScript is loaded and no console errors exist
- If styling is missing: Ensure client libraries are properly configured

### Example Implementation

```html
<!-- Example usage in a page template -->
<div class="page-content">
  <!-- Other components -->

  <!-- Truck Lister Component -->
  <sly data-sly-resource="${'truck-lister-component' @ resourceType='voltrux/components/content/trucklister',
                          rootPath='/content/voltrux/en/trucks',
                          maxResults=12}"></sly>

  <!-- Other components -->
</div>
```

## Component Folder Structure

The Truck Lister component follows the standard AEM component structure:

```
voltrux/
└── components/
    └── content/
        └── trucklister/
            ├── .content.xml
            ├── _cq_dialog/
            │   └── .content.xml
            ├── _cq_editConfig.xml
            ├── trucklister.html
            └── css/
                └── trucklister.css
```